<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="360T7 写入 openwrt 360T7 配置MT7981(filogic 820)  CPU：MT7981B 双核 A53 1.3GHz ，架构 aarch64_cortex-a53 RAM：256M DDR3 FLASH：128M SPI NAND 无线 phy：MT7976CN AX3000 交换机：MT7531A 2xHSGMII  原厂 UBoot 启动时，只能使用一个 ubi 分">
<meta property="og:type" content="article">
<meta property="og:title" content="360T7升级openwert">
<meta property="og:url" content="https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/index.html">
<meta property="og:site_name" content="栖 息 地">
<meta property="og:description" content="360T7 写入 openwrt 360T7 配置MT7981(filogic 820)  CPU：MT7981B 双核 A53 1.3GHz ，架构 aarch64_cortex-a53 RAM：256M DDR3 FLASH：128M SPI NAND 无线 phy：MT7976CN AX3000 交换机：MT7531A 2xHSGMII  原厂 UBoot 启动时，只能使用一个 ubi 分">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-10-27T03:50:08.000Z">
<meta property="article:modified_time" content="2023-10-28T10:03:40.097Z">
<meta property="article:author" content="Wangqifei">
<meta property="article:tag" content="OpenWrt">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico00">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>360T7升级openwert</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
      <!-- 霞鹜文楷 Regular -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKai-Regular.css" />
      <!-- 霞鹜文楷 Lite -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKai-Light.css" />
      <!-- 霞鹜文楷 Bold -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKai-Bold.css" />
      <!-- 霞鹜文楷 Mono Regular -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKaiMono-Regular.css" />
      <!-- 霞鹜文楷 Mono Lite -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKaiMono-Light.css" />
      <!-- 霞鹜文楷 Mono Bold -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKaiMono-Bold.css" />
  <!--google search console验证  -->
  <meta name="google-site-verification" content="6lVEiGTTfQ7cgd8Cjy4H3MoS59-Bspl18UX-21EvKUc" />
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="栖 息 地" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/2023/10/28/win%E4%B8%8Emac%E4%B9%8B%E9%97%B4%E7%9A%84%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/2023/10/24/Ios-%E6%8D%B7%E5%BE%84-ShortCuts-%E7%AC%94%E8%AE%B0/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <!-- 
    <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li> 
  -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&text=360T7升级openwert"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <!-- 
    <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&is_video=false&description=360T7升级openwert"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=360T7升级openwert&body=Check out this article: https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&name=360T7升级openwert&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&t=360T7升级openwert"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
 -->
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#360T7-%E5%86%99%E5%85%A5-openwrt"><span class="toc-number">1.</span> <span class="toc-text"> 360T7 写入 openwrt </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#360T7-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">360T7 配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.</span> <span class="toc-text">分区信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-telnet"><span class="toc-number">1.3.</span> <span class="toc-text">开启 telnet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#telnet-%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.4.</span> <span class="toc-text">telnet 连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#uboot"><span class="toc-number">1.5.</span> <span class="toc-text">uboot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%B7%E5%85%A5-UBoot"><span class="toc-number">1.5.1.</span> <span class="toc-text">刷入 UBoot</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E5%85%A5%E5%9B%BA%E4%BB%B6"><span class="toc-number">1.6.</span> <span class="toc-text">刷入固件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#failsafe-webui-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.7.</span> <span class="toc-text">failsafe webui 使用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E6%9C%BA"><span class="toc-number">1.8.</span> <span class="toc-text">刷机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#openwrt-%E5%9B%BA%E4%BB%B6"><span class="toc-number">1.9.</span> <span class="toc-text">openwrt 固件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%98%E6%96%B9-openwrt"><span class="toc-number">1.9.1.</span> <span class="toc-text">官方 openwrt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%96%87%E4%BB%B6"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">需要文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hanwckf-%E7%89%88"><span class="toc-number">1.9.2.</span> <span class="toc-text">hanwckf 版</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hanwckf-%E7%BC%96%E8%AF%91%E7%89%88"><span class="toc-number">1.9.2.1.</span> <span class="toc-text">hanwckf 编译版</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BD%98%E5%A4%9A%E6%8B%89%E7%89%88"><span class="toc-number">1.9.3.</span> <span class="toc-text">潘多拉版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#immortaiwrt"><span class="toc-number">1.9.4.</span> <span class="toc-text">immortaiwrt</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#openwrt-%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%8F%82%E8%80%83"><span class="toc-number">1.10.</span> <span class="toc-text">openwrt 的文件结构参考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#openwrt-%E5%8F%A3%E4%BB%A4"><span class="toc-number">1.11.</span> <span class="toc-text">openwrt 口令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SSH"><span class="toc-number">1.12.</span> <span class="toc-text">SSH</span></a></li></ol></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        360T7升级openwert
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Wangqifei</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-10-27T03:50:08.000Z" class="dt-published" itemprop="datePublished">2023-10-27</time>
        
        (Updated: <time datetime="2023-10-28T10:03:40.097Z" class="dt-updated" itemprop="dateModified">2023-10-28</time>)
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/OpenWrt/" rel="tag">OpenWrt</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h1 id="360T7-写入-openwrt"><a href="#360T7-写入-openwrt" class="headerlink" title=" 360T7 写入 openwrt "></a><center> 360T7 写入 openwrt </center></h1><h2 id="360T7-配置"><a href="#360T7-配置" class="headerlink" title="360T7 配置"></a>360T7 配置</h2><p>MT7981(filogic 820)</p>
<ul>
<li>CPU：MT7981B 双核 A53 1.3GHz ，架构 aarch64_cortex-a53</li>
<li>RAM：256M DDR3</li>
<li>FLASH：128M SPI NAND</li>
<li>无线 phy：MT7976CN AX3000</li>
<li>交换机：MT7531A 2xHSGMII</li>
</ul>
<p>原厂 UBoot 启动时，只能使用一个 ubi 分区存放固件，固件总体积（含 kernel+rootfs+rootfs_data）将限制在 36M 内，但仍然可以使用 plugin 分区（36M）存放其它数据。因此，原厂的 UBoot 只能使用小于 36M 的固件，较大的固件超过了存放 ubi 的分区就不能使用。</p>
<h2 id="分区信息"><a href="#分区信息" class="headerlink" title="分区信息"></a>分区信息</h2><ul>
<li>Factory 为无线 EEPROM 分区</li>
<li>fip 为 uboot 分区</li>
<li>ubi 为固件分区，36M，ubi 格式</li>
<li>firmware-1 为固件分区，36M，ubi 格式</li>
<li>plugin 为原厂插件分区，36M，ubi 格式</li>
<li>factory 为原厂固件信息分区，保存有机器编号，MAC 地址等信息</li>
</ul>
<h2 id="开启-telnet"><a href="#开启-telnet" class="headerlink" title="开启 telnet"></a>开启 telnet</h2><ol>
<li>拆机。<br>用卡片撬动，可以无损开机。<br>从底部中间部位插入翘片，需要注意卡扣方向，卡扣的结构为外壳扣在底座里的，使用翘片使底座向外正面外壳向内方向撬动，沿边缘走。<br>注意四个角的卡扣。</li>
<li>找到 UART 串口。<br>拆机后找到，主板正面（贴芯片的一面），左上方侧边三个圆孔，线序从上到下一次为 RXD,TXD,GND，分别对应读、写、地。波特率为&#96;115200</li>
<li>使用串口工具，连接路由器，串口工具的读对应路由器 UART 的写，地对地。不要接错！</li>
<li>使用串口助手，路由器通电，等待启动，不断按 <code>F</code>和回车键，直到出现以下提示进入 failsafe 模式。</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Press the <span class="selector-attr">[f]</span> key and hit <span class="selector-attr">[enter]</span> <span class="selector-tag">to</span> enter failsafe mode</span><br><span class="line">Press the <span class="selector-attr">[1]</span>, <span class="selector-attr">[2]</span>, <span class="selector-attr">[3]</span> or <span class="selector-attr">[4]</span> key and hit <span class="selector-attr">[enter]</span> <span class="selector-tag">to</span> select the debug level</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>failsafe 下执行以下操作</li>
</ol>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启uboot控制台菜单</span></span><br><span class="line">fw_setenv bootmenu_delay <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载rootfs并开启telnet</span></span><br><span class="line">mount_root</span><br><span class="line">sed -i <span class="string">&#x27;s/.*local debug=.*/\tlocal debug=1/&#x27;</span> <span class="regexp">/etc/i</span>nit.d/telnet</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改root密码</span></span><br><span class="line">passwd root</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>重启。 <code>reboot</code></li>
</ol>
<ul>
<li>Putty 串口操作<br>putty 可替代替代 串口助手 ，具体用法如下：<ol>
<li>session<br>Serical Line:选择设备使用的串口，speed:115200,connection type:serical</li>
<li>Connection-Serical<br>Flow control: none 。流控制基本不再使用了</li>
<li>Teminal<br>Teminal-Imolcit CR in every IF \ Imolcit LF in every CR 勾选<br>Local echo: force on<br>Local line editing:force on</li>
<li>Opne 运行即可。</li>
</ol>
</li>
</ul>
<h2 id="telnet-连接"><a href="#telnet-连接" class="headerlink" title="telnet 连接"></a>telnet 连接</h2><p>在 failsafe 模式下打开 telnet 以后，重启路由器，使用 telnet 连接路由器，ip 地址为路由器的后台管理页面地址，密码为在 failsafe 下设置的密码（也就是路由器的𭙃密码）。</p>
<p>windws</p>
<ul>
<li>开启 telent<br>win+R 运行 ctrol-程序-程序和功能-启动和关闭 windows 功能-Telnet 客户端勾选。<br>xin+R 运行 cmd,运行 telent 即可</li>
</ul>
<p>也可使用 termius 等工具。</p>
<h2 id="uboot"><a href="#uboot" class="headerlink" title="uboot"></a>uboot</h2><p>基于 bl-mt798x 项目<br><a target="_blank" rel="noopener" href="https://github.com/hanwckf/bl-mt798x/tree/20230902">mt798x uboot</a></p>
<ul>
<li>CPU : mt798</li>
<li>BOARD : 360t7</li>
<li>默认地址 ：192.168.1.1</li>
<li>固件分区 108M，原厂固件分区 36M</li>
<li>带有 webui 恢复页面<br>UBoot 升级：<a target="_blank" rel="noopener" href="http://192.168.1.1/uboot.html">192.168.1.1&#x2F;uboot.html</a><br>FirmwareUpdate:<a target="_blank" rel="noopener" href="http://192.168.1.1/uboot.html">192.168.1.1&#x2F;uboot.html</a><br>可以在 webui 刷 uboot 或者固件。</li>
<li>支持多种 Flash 分区布局切换</li>
</ul>
<h3 id="刷入-UBoot"><a href="#刷入-UBoot" class="headerlink" title="刷入 UBoot"></a>刷入 UBoot</h3><ol>
<li>下载该修改版 UBoot:mt798x-uboot-202206-fip.tar.xz,解压缩出 bin 文件。</li>
<li>将 Uboot bin 文件上传到路由器,并写进 fip。<br>使用 telnet 将文件上传到&#x2F;tmp,直接使用 wegt 下载到&#x2F;tmp 也可以。上传文件以后，执行 <code>mtd write mt7981_360t7-fip-fixed-parts.bin fip</code>写入 UBoot 文件，刷 UBoot 完成。</li>
</ol>
<h2 id="刷入固件"><a href="#刷入固件" class="headerlink" title="刷入固件"></a>刷入固件</h2><ol>
<li>完成 UBoot 写入以后，断电，修改电脑 IP 为 192.168.1.2，子网掩码 255.255.255.0，网关 192.168.1.1，dns 192.168.1.1.按住路由器 RESET 按键，通电，等待 8s 后使用访问 192.168.1.1 进入 uboot 恢复页面。</li>
<li>选择固件，写入。</li>
<li>重启完成。</li>
</ol>
<h2 id="failsafe-webui-使用方法"><a href="#failsafe-webui-使用方法" class="headerlink" title="failsafe webui 使用方法"></a>failsafe webui 使用方法</h2><ol>
<li>按住路由器 RESET 键孔后通电，保持 10-15 秒后松开按键，路由器自动进入 failsafe 模式。</li>
<li>uboot 不支持 DHCP,需要电脑网线接路由期 lan 口，配置电脑 ip 为固定 IP 设置 <code>192.168.1.100</code>。</li>
<li>使用浏览器的 隐身模式 访问路由器 ip <code>192.168.1.1</code></li>
<li>选择固件上传，支持 sysupgrade 和 factory 格式的固件，上传完毕后点击开始刷机。</li>
<li>固件写入后，路由器会自动撑起，请将电脑 ip 地址重新设置成 DHCP 自动获取。</li>
<li>要使用 webui 更新 uboot,可以访问 <code>http：//&lt;路由ip&gt;/uboot.html</code> ,选择 FIP 格式的 uboot 二进制文件并上传刷如即可。</li>
</ol>
<h2 id="刷机"><a href="#刷机" class="headerlink" title="刷机"></a>刷机</h2><h2 id="openwrt-固件"><a href="#openwrt-固件" class="headerlink" title="openwrt 固件"></a>openwrt 固件</h2><h3 id="官方-openwrt"><a href="#官方-openwrt" class="headerlink" title="官方 openwrt"></a>官方 openwrt</h3><blockquote>
<p>⚠️ 注意： 这里仅限原厂分区即 36M UBoot 使用的，修改版的 Uboot 运行情况没测试。<br>因为没有 NMBM,所以需要刷机前在 failsafe mode 备份所有 mtd 分区。</p>
</blockquote>
<h4 id="需要文件"><a href="#需要文件" class="headerlink" title="需要文件"></a><a target="_blank" rel="noopener" href="https://downloads.openwrt.org/snapshots/targets/mediatek/filogic/">需要文件</a></h4><ul>
<li><p>openwrt-23.05.0-mediatek-filogic-qihoo_360t7-bl31-uboot.fip<br>ATF uboot 文件，似乎不支持 108M Uboot。</p>
</li>
<li><p>openwrt-23.05.0-mediatek-filogic-qihoo_360t7-initramfs-recovery.itb</p>
</li>
<li><p>openwrt-23.05.0-mediatek-filogic-qihoo_360t7-preloader.bin<br>ATF BL2 文件</p>
</li>
<li><p>openwrt-23.05.0-mediatek-filogic-qihoo_360t7-squashfs-sysupgrade.itb</p>
</li>
</ul>
<h3 id="hanwckf-版"><a href="#hanwckf-版" class="headerlink" title="hanwckf 版"></a>hanwckf 版</h3><h4 id="hanwckf-编译版"><a href="#hanwckf-编译版" class="headerlink" title="hanwckf 编译版"></a>hanwckf 编译版</h4><p><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-8290125-1-1.html">恩山论坛</a></p>
<p>在 github 上有个一个基于 hanwckf 的编译版，<a target="_blank" rel="noopener" href="https://github.com/weigefenxiang/360T7/releases/tag/latest">在这里可以找到</a>。<br>基于修改的 108M 的 Uboot,比较纯净。</p>
<h3 id="潘多拉版"><a href="#潘多拉版" class="headerlink" title="潘多拉版"></a>潘多拉版</h3><h3 id="immortaiwrt"><a href="#immortaiwrt" class="headerlink" title="immortaiwrt"></a>immortaiwrt</h3><h2 id="openwrt-的文件结构参考"><a href="#openwrt-的文件结构参考" class="headerlink" title="openwrt 的文件结构参考"></a>openwrt 的文件结构参考</h2><p>分区结构 <code>df -h</code></p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">- /</span><br><span class="line">  |- dev</span><br><span class="line">  |  |- root              # 根文件系统</span><br><span class="line">  |  |- ubi0_2            # UBI 设备的第二个分区</span><br><span class="line">  |</span><br><span class="line">  |- tmpfs                # 基于内存的临时文件系统</span><br><span class="line">  |</span><br><span class="line"><span class="title">  |- overlayfs:</span>/overlay   # Overlay 文件系统的挂载点，用于系统修改和用户自定义</span><br><span class="line">  |</span><br><span class="line">  |- ...</span><br><span class="line"></span><br><span class="line">---------------------</span><br><span class="line">  <span class="number">1</span>. `/dev/root`：这是根文件系统（root filesystem），它通常是只读的。它包含了操作系统的核心组件和基本文件。在启动过程中，它通常被挂载为只读文件系统。</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. `tmpfs`：`tmpfs` 是一种基于内存的临时文件系统。它在内存中创建一个文件系统，用于存储临时数据，例如临时文件、日志文件等。`tmpfs` 是易失性的，意味着在系统重启后，其中存储的数据将丢失。</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. `/dev/ubi0_2`：这表示 UBI（Unsorted Block Images）设备的第二个分区。UBI 是用于处理闪存设备的抽象层，它允许将闪存分区虚拟化为逻辑块设备。`/dev/ubi0_2` 可能是一个可读写的分区，用于存储用户数据或配置。</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>. `overlayfs:/overlay`：`overlayfs` 是一种联合文件系统，允许将多个文件系统层叠在一起。`/overlay` 表示一个 overlayfs 文件系统的挂载点，它是用于存储系统修改和用户自定义的文件系统。通常，`/overlay` 是可读写的，并且用于存储用户安装的软件包、配置更改和其他系统修改。</span><br><span class="line"></span><br><span class="line"><span class="title">这些文件系统在 OpenWrt 中扮演着不同的角色。其中，根文件系统包含了操作系统的核心组件和基本文件，`tmpfs` 用于临时存储，`/dev/ubi0_2` 可能是存储用户数据的分区，而 `overlayfs:</span>/overlay` 则用于存储系统修改和用户自定义的文件系统。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>文件结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">├── dev</span><br><span class="line">│   ├── mtdblockX       # 存储闪存芯片上的分区</span><br><span class="line">│   ├── mmcblk0pX       # SD卡或eMMC存储器的分区</span><br><span class="line">│   └── sdXN            # 外部USB存储设备的分区</span><br><span class="line">├── etc                 # 系统配置文件</span><br><span class="line">├── bin                 # 可执行文件</span><br><span class="line">├── sbin                # 系统可执行文件</span><br><span class="line">├── usr                 # 用户程序和数据</span><br><span class="line">│   ├── bin             # 用户可执行文件</span><br><span class="line">│   ├── sbin            # 用户系统可执行文件</span><br><span class="line">│   ├── lib             # 库文件</span><br><span class="line">│   ├── lib64           # 64位库文件</span><br><span class="line">│   ├── include         # 头文件</span><br><span class="line">│   ├── share           # 共享数据</span><br><span class="line">│   └── ...</span><br><span class="line">├── tmp                 # 临时文件</span><br><span class="line">├── proc                # 内核和进程信息</span><br><span class="line">├── sys                 # 系统相关信息</span><br><span class="line">├── mnt                 # 挂载点</span><br><span class="line">├── var                 # 可变数据</span><br><span class="line">├── www                 # Web服务器根目录</span><br><span class="line">└── ...</span><br></pre></td></tr></table></figure>

<h2 id="openwrt-口令"><a href="#openwrt-口令" class="headerlink" title="openwrt 口令"></a>openwrt 口令</h2><p>用户名：root<br>密码：password 或者 空</p>
<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><ul>
<li>ssh <usr>@<ip><br>ssh 连接</li>
<li>ssh-keygen -R <ip><br>ssh 连接密钥重置</li>
<li>cat &#x2F;proc&#x2F;mtd<br>查找分区的名称。在列出的输出中，可以看到每个分区的名称、起始地址和大小。</li>
<li>df -h<br>硬盘空间查看</li>
<li>du -h<br>查看指定文件或目录的磁盘占用</li>
</ul>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">首页</a></li>
        
          <li><a href="/about/">关于</a></li>
        
          <li><a href="/archives/">归档</a></li>
        
          <li><a href="/search/">搜索</a></li>
        
          <li><a href="/tags/">标签</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#360T7-%E5%86%99%E5%85%A5-openwrt"><span class="toc-number">1.</span> <span class="toc-text"> 360T7 写入 openwrt </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#360T7-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">360T7 配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">1.2.</span> <span class="toc-text">分区信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-telnet"><span class="toc-number">1.3.</span> <span class="toc-text">开启 telnet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#telnet-%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.4.</span> <span class="toc-text">telnet 连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#uboot"><span class="toc-number">1.5.</span> <span class="toc-text">uboot</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%B7%E5%85%A5-UBoot"><span class="toc-number">1.5.1.</span> <span class="toc-text">刷入 UBoot</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E5%85%A5%E5%9B%BA%E4%BB%B6"><span class="toc-number">1.6.</span> <span class="toc-text">刷入固件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#failsafe-webui-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.7.</span> <span class="toc-text">failsafe webui 使用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B7%E6%9C%BA"><span class="toc-number">1.8.</span> <span class="toc-text">刷机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#openwrt-%E5%9B%BA%E4%BB%B6"><span class="toc-number">1.9.</span> <span class="toc-text">openwrt 固件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%98%E6%96%B9-openwrt"><span class="toc-number">1.9.1.</span> <span class="toc-text">官方 openwrt</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%96%87%E4%BB%B6"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">需要文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hanwckf-%E7%89%88"><span class="toc-number">1.9.2.</span> <span class="toc-text">hanwckf 版</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hanwckf-%E7%BC%96%E8%AF%91%E7%89%88"><span class="toc-number">1.9.2.1.</span> <span class="toc-text">hanwckf 编译版</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BD%98%E5%A4%9A%E6%8B%89%E7%89%88"><span class="toc-number">1.9.3.</span> <span class="toc-text">潘多拉版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#immortaiwrt"><span class="toc-number">1.9.4.</span> <span class="toc-text">immortaiwrt</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#openwrt-%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%8F%82%E8%80%83"><span class="toc-number">1.10.</span> <span class="toc-text">openwrt 的文件结构参考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#openwrt-%E5%8F%A3%E4%BB%A4"><span class="toc-number">1.11.</span> <span class="toc-text">openwrt 口令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SSH"><span class="toc-number">1.12.</span> <span class="toc-text">SSH</span></a></li></ol></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <!-- 
    <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li> 
  -->
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&text=360T7升级openwert"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <!-- 
    <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&is_video=false&description=360T7升级openwert"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=360T7升级openwert&body=Check out this article: https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&title=360T7升级openwert"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&name=360T7升级openwert&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://wangqifei.eu.org/2023/10/27/360T7%E5%8D%87%E7%BA%A7openwert/&t=360T7升级openwert"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
 -->
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        
        <!-- 
          <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a> 
        -->
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023
    Wangqifei
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
